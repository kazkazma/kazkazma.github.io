<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>HLS Live streaming</title>
		<link href="https://vjs.zencdn.net/7.17.0/video-js.css" rel="stylesheet" />
		<script src="https://vjs.zencdn.net/7.17.0/video.js"></script>
	</head>
	<body>
		<div class="wrapper">
			<video id=player class="video-js vjs-default-skin vjs-big-play-centered" controls muted autoplay>
				<source src="http://140.112.202.143:8080/hls/test.m3u8" type="application/x-mpegURL">
			</video>
		</div>
		<script>
			const params = new Proxy(new URLSearchParams(window.location.search), {
				get: (searchParams, prop) => searchParams.get(prop),
			});
			let token = params.token;
			document.getElementsByTagName("source")[0].src = `/hls/${token}.m3u8`
			var player = videojs('player', { fill: true });
			player.play();
		</script>
	</body>
	<style>
		body {
			background: black;
		}
		.wrapper {
			position: absolute;
			top: 0px;
			right: 0px;
			bottom: 0px;
			left: 0px;
			width: 100%;
			max-height: 100%;
		}
		.wrapper>video {
			width: 100%;
		}
	</style>

</html>